# IVY 4G Gateway Configuration
# Copy to .env and modify as needed

# ===================
# Environment
# ===================
NODE_ENV=production
APP_NAME=ivy-4g-gateway
LOG_LEVEL=info

# ===================
# TCP Server (Meter connections)
# ===================
TCP_HOST=0.0.0.0
TCP_PORT=8899
TCP_HEARTBEAT_INTERVAL=30000
TCP_CONNECTION_TIMEOUT=120000

# ===================
# MQTT Broker (Embedded)
# ===================
MQTT_PORT=1883
MQTT_WS_PORT=9001
MQTT_HOST=0.0.0.0

# MQTT Authentication
MQTT_AUTH_ENABLED=true
MQTT_ALLOW_ANONYMOUS=false
# Format: "user1:pass1,user2:pass2"
MQTT_USERS=admin:change_me_in_production

# MQTT Client (for external broker connection)
MQTT_BROKER_URL=mqtt://localhost:1883
MQTT_USERNAME=
MQTT_PASSWORD=
MQTT_CLIENT_ID=ivy-gateway-01
MQTT_TOPIC_PREFIX=metpow/4g

# ===================
# HTTP Dashboard
# ===================
HTTP_ENABLED=true
HTTP_PORT=3000

# ===================
# Polling Configuration
# ===================
POLLING_ENABLED=true
POLLING_INTERVAL=60000
POLLING_REGISTER_GROUP=energy
POLLING_TIMEOUT=10000
POLLING_RETRIES=2
POLLING_STAGGER_DELAY=100

# ===================
# Status Manager
# ===================
STATUS_PUBLISH_INTERVAL=30000

# ===================
# PostgreSQL (Future)
# ===================
DB_HOST=localhost
DB_PORT=5432
DB_NAME=ivy_gateway
DB_USER=postgres
DB_PASSWORD=

# ===================
# Redis (Future)
# ===================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# ===================
# Security
# ===================
# Required in production
AES_ENCRYPTION_KEY=
METER_OPERATOR_CODE=00000000
METER_PASSWORD=00000000

# Rate Limiting (TCP)
RATE_LIMITING_ENABLED=true
MAX_CONNECTIONS_PER_IP=10
MAX_CONNECTION_ATTEMPTS=20
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_BLOCK_DURATION=300000

# Rate Limiting (HTTP)
HTTP_MAX_REQUESTS_PER_MINUTE=100
